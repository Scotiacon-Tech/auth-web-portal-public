import{T as ne}from"./BW8qFcV5.js";import{u as ge,J as O,r as L,a8 as C,O as d,g as M,V as U,h as F,a2 as ye,L as W,M as re,Z as D,ag as z,b as S,R as Y,e as se,a1 as pe,aP as we,$ as be,aQ as Se,ad as ke,af as Te,ae as Ve,G as ue,P as Be,al as Ee,F as Ce,T as Pe,m as Me,aR as xe,C as He,B as Q,v as N,o as Ie,p as Re,w as _,d as _e,z as Ae,ao as Ne,A as De}from"./C5O1eoPZ.js";import{j as Le,e as ee,k as Ye,f as $e,m as ze,b as Oe,d as We,u as Xe,V as Ue}from"./BUPKjDln.js";import{a as X,b as Fe,c as qe}from"./Eucvj40_.js";import{J as Ze,V as Je,y as je,z as Ge,k as Ke,C as Qe,u as te,E as et,q as tt,h as at,t as lt,K as ot}from"./BVYz_vxZ.js";import{m as ie,a as ce}from"./BUhtUJvg.js";import{u as ve}from"./VJxc4tcS.js";import{V as nt,a as ae}from"./B87AwP6B.js";import{V as rt,a as st}from"./bgS3wt9y.js";/* empty css        */import"./zO34qd5a.js";const ut=()=>ne.getInstance(),it=async()=>{const e=ge(),o=ne.getInstance().getTokenByService("graze");return await $fetch(`${e.public.issuerUri}/api/access_check`,{method:"get",headers:{Authorization:`Bearer ${o==null?void 0:o.OAuthToken.AccessToken}`}})},ct=O({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function vt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=r;let p=0,t=0;const a=L(null),l=C(0),i=C(0),k=C(0),w=C(!1),s=C(!1),n=d(()=>Number(e.scrollThreshold)),m=d(()=>ye((n.value-l.value)/n.value||0)),g=()=>{const u=a.value;if(!u||o&&!o.value)return;p=l.value,l.value="window"in u?u.pageYOffset:u.scrollTop;const b=u instanceof Window?document.documentElement.scrollHeight:u.scrollHeight;if(t!==b){t=b;return}s.value=l.value<p,k.value=Math.abs(l.value-n.value)};return M(s,()=>{i.value=i.value||l.value}),M(w,()=>{i.value=0}),U(()=>{M(()=>e.scrollTarget,u=>{var P;const b=u?document.querySelector(u):window;b&&b!==a.value&&((P=a.value)==null||P.removeEventListener("scroll",g),a.value=b,a.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),F(()=>{var u;(u=a.value)==null||u.removeEventListener("scroll",g)}),o&&M(o,g,{immediate:!0}),{scrollThreshold:n,currentScroll:l,currentThreshold:k,isScrollActive:w,scrollRatio:m,isScrollingUp:s,savedScroll:i}}const dt=O({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Le(),...ie(),...ct(),height:{type:[Number,String],default:64}},"VAppBar"),mt=W()({name:"VAppBar",props:dt(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:o}=r;const p=L(),t=re(e,"modelValue"),a=d(()=>{var E;const h=new Set(((E=e.scrollBehavior)==null?void 0:E.split(" "))??[]);return{hide:h.has("hide"),fullyHide:h.has("fully-hide"),inverted:h.has("inverted"),collapse:h.has("collapse"),elevate:h.has("elevate"),fadeImage:h.has("fade-image")}}),l=d(()=>{const h=a.value;return h.hide||h.fullyHide||h.inverted||h.collapse||h.elevate||h.fadeImage||!t.value}),{currentScroll:i,scrollThreshold:k,isScrollingUp:w,scrollRatio:s}=vt(e,{canScroll:l}),n=d(()=>a.value.hide||a.value.fullyHide),m=d(()=>e.collapse||a.value.collapse&&(a.value.inverted?s.value>0:s.value===0)),g=d(()=>e.flat||a.value.fullyHide&&!t.value||a.value.elevate&&(a.value.inverted?i.value>0:i.value===0)),u=d(()=>a.value.fadeImage?a.value.inverted?1-s.value:s.value:void 0),b=d(()=>{var I,x;if(a.value.hide&&a.value.inverted)return 0;const h=((I=p.value)==null?void 0:I.contentHeight)??0,E=((x=p.value)==null?void 0:x.extensionHeight)??0;return n.value?i.value<k.value||a.value.fullyHide?h+E:h:h+E});D(d(()=>!!e.scrollBehavior),()=>{se(()=>{n.value?a.value.inverted?t.value=i.value>k.value:t.value=w.value||i.value<k.value:t.value=!0})});const{ssrBootStyles:P}=ve(),{layoutItemStyles:H}=ce({id:e.name,order:d(()=>parseInt(e.order,10)),position:z(e,"location"),layoutSize:b,elementSize:C(void 0),active:t,absolute:z(e,"absolute")});return X(()=>{const h=ee.filterProps(e);return S(ee,Y({ref:p,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...H.value,"--v-toolbar-image-opacity":u.value,height:void 0,...P.value},e.style]},h,{collapse:m.value,flat:g.value}),o)}),{}}}),ht=O({...Ze({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ft=W()({name:"VAppBarNavIcon",props:ht(),setup(e,r){let{slots:o}=r;return X(()=>S(Je,Y(e,{class:["v-app-bar-nav-icon"]}),o)),{}}}),gt=W()({name:"VAppBarTitle",props:Ye(),setup(e,r){let{slots:o}=r;return X(()=>S($e,Y(e,{class:"v-app-bar-title"}),o)),{}}});function yt(e){let{rootEl:r,isSticky:o,layoutItemStyles:p}=e;const t=C(!1),a=C(0),l=d(()=>{const w=typeof t.value=="boolean"?"top":t.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[w]:pe(a.value)}:{top:p.value.top}]});U(()=>{M(o,w=>{w?window.addEventListener("scroll",k,{passive:!0}):window.removeEventListener("scroll",k)},{immediate:!0})}),F(()=>{window.removeEventListener("scroll",k)});let i=0;function k(){const w=i>window.scrollY?"up":"down",s=r.value.getBoundingClientRect(),n=parseFloat(p.value.top??0),m=window.scrollY-Math.max(0,a.value-n),g=s.height+Math.max(a.value,n)-window.scrollY-window.innerHeight,u=parseFloat(getComputedStyle(r.value).getPropertyValue("--v-body-scroll-y"))||0;s.height<window.innerHeight-n?(t.value="top",a.value=n):w==="up"&&t.value==="bottom"||w==="down"&&t.value==="top"?(a.value=window.scrollY+s.top-u,t.value=!0):w==="down"&&g<=0?(a.value=0,t.value="bottom"):w==="up"&&m<=0&&(u?t.value!=="top"&&(a.value=-m+u+n,t.value="top"):(a.value=s.top+m,t.value="top")),i=window.scrollY}return{isStuck:t,stickyStyles:l}}const pt=100,wt=20;function le(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function oe(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let r=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const p=le(r),t=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);r+=(t-p)*Math.abs(t),o===e.length-1&&(r*=.5)}return le(r)*1e3}function bt(){const e={};function r(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new we(wt))).push([t.timeStamp,a])})}function o(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function p(t){var w;const a=(w=e[t])==null?void 0:w.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const l=a[0],i=[],k=[];for(const s of a){if(l[0]-s[0]>pt)break;i.push({t:s[0],d:s[1].clientX}),k.push({t:s[0],d:s[1].clientY})}return{x:oe(i),y:oe(k),get direction(){const{x:s,y:n}=this,[m,g]=[Math.abs(s),Math.abs(n)];return m>g&&s>=0?"right":m>g&&s<=0?"left":g>m&&n>=0?"down":g>m&&n<=0?"up":St()}}}return{addMovement:r,endTouch:o,getVelocity:p}}function St(){throw new Error}function kt(e){let{el:r,isActive:o,isTemporary:p,width:t,touchless:a,position:l}=e;U(()=>{window.addEventListener("touchstart",h,{passive:!0}),window.addEventListener("touchmove",E,{passive:!1}),window.addEventListener("touchend",I,{passive:!0})}),F(()=>{window.removeEventListener("touchstart",h),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",I)});const i=d(()=>["left","right"].includes(l.value)),{addMovement:k,endTouch:w,getVelocity:s}=bt();let n=!1;const m=C(!1),g=C(0),u=C(0);let b;function P(c,v){return(l.value==="left"?c:l.value==="right"?document.documentElement.clientWidth-c:l.value==="top"?c:l.value==="bottom"?document.documentElement.clientHeight-c:A())-(v?t.value:0)}function H(c){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const f=l.value==="left"?(c-u.value)/t.value:l.value==="right"?(document.documentElement.clientWidth-c-u.value)/t.value:l.value==="top"?(c-u.value)/t.value:l.value==="bottom"?(document.documentElement.clientHeight-c-u.value)/t.value:A();return v?Math.max(0,Math.min(1,f)):f}function h(c){if(a.value)return;const v=c.changedTouches[0].clientX,f=c.changedTouches[0].clientY,y=25,V=l.value==="left"?v<y:l.value==="right"?v>document.documentElement.clientWidth-y:l.value==="top"?f<y:l.value==="bottom"?f>document.documentElement.clientHeight-y:A(),T=o.value&&(l.value==="left"?v<t.value:l.value==="right"?v>document.documentElement.clientWidth-t.value:l.value==="top"?f<t.value:l.value==="bottom"?f>document.documentElement.clientHeight-t.value:A());(V||T||o.value&&p.value)&&(b=[v,f],u.value=P(i.value?v:f,o.value),g.value=H(i.value?v:f),n=u.value>-20&&u.value<80,w(c),k(c))}function E(c){const v=c.changedTouches[0].clientX,f=c.changedTouches[0].clientY;if(n){if(!c.cancelable){n=!1;return}const V=Math.abs(v-b[0]),T=Math.abs(f-b[1]);(i.value?V>T&&V>3:T>V&&T>3)?(m.value=!0,n=!1):(i.value?T:V)>3&&(n=!1)}if(!m.value)return;c.preventDefault(),k(c);const y=H(i.value?v:f,!1);g.value=Math.max(0,Math.min(1,y)),y>1?u.value=P(i.value?v:f,!0):y<0&&(u.value=P(i.value?v:f,!1))}function I(c){if(n=!1,!m.value)return;k(c),m.value=!1;const v=s(c.changedTouches[0].identifier),f=Math.abs(v.x),y=Math.abs(v.y);(i.value?f>y&&f>400:y>f&&y>3)?o.value=v.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||A()):o.value=g.value>.5}const x=d(()=>m.value?{transform:l.value==="left"?`translateX(calc(-100% + ${g.value*t.value}px))`:l.value==="right"?`translateX(calc(100% - ${g.value*t.value}px))`:l.value==="top"?`translateY(calc(-100% + ${g.value*t.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${g.value*t.value}px))`:A(),transition:"none"}:void 0);return D(m,()=>{var f,y;const c=((f=r.value)==null?void 0:f.style.transform)??null,v=((y=r.value)==null?void 0:y.style.transition)??null;se(()=>{var V,T,R,$;(T=r.value)==null||T.style.setProperty("transform",((V=x.value)==null?void 0:V.transform)||"none"),($=r.value)==null||$.style.setProperty("transition",((R=x.value)==null?void 0:R.transition)||null)}),be(()=>{var V,T;(V=r.value)==null||V.style.setProperty("transform",c),(T=r.value)==null||T.style.setProperty("transition",v)})}),{isDragging:m,dragProgress:g,dragStyles:x}}function A(){throw new Error}const Tt=["start","end","left","right","top","bottom"],Vt=O({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Tt.includes(e)},sticky:Boolean,...je(),...Fe(),...ze(),...Se({mobile:null}),...Ge(),...ie(),...Ke(),...qe({tag:"nav"}),...ke()},"VNavigationDrawer"),Bt=W()({name:"VNavigationDrawer",props:Vt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,r){let{attrs:o,emit:p,slots:t}=r;const{isRtl:a}=Te(),{themeClasses:l}=Ve(e),{borderClasses:i}=Qe(e),{backgroundColorClasses:k,backgroundColorStyles:w}=te(z(e,"color")),{elevationClasses:s}=et(e),{displayClasses:n,mobile:m}=ue(e),{roundedClasses:g}=tt(e),u=at(),b=re(e,"modelValue",null,B=>!!B),{ssrBootStyles:P}=ve(),{scopeId:H}=Oe(),h=L(),E=C(!1),{runOpenDelay:I,runCloseDelay:x}=Xe(e,B=>{E.value=B}),c=d(()=>e.rail&&e.expandOnHover&&E.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),v=d(()=>ot(e.location,a.value)),f=d(()=>e.persistent),y=d(()=>!e.permanent&&(m.value||e.temporary)),V=d(()=>e.sticky&&!y.value&&v.value!=="bottom");D(()=>e.expandOnHover&&e.rail!=null,()=>{M(E,B=>p("update:rail",!B))}),D(()=>!e.disableResizeWatcher,()=>{M(y,B=>!e.permanent&&Pe(()=>b.value=!B))}),D(()=>!e.disableRouteWatcher&&!!u,()=>{M(u.currentRoute,()=>y.value&&(b.value=!1))}),M(()=>e.permanent,B=>{B&&(b.value=!0)}),e.modelValue==null&&!y.value&&(b.value=e.permanent||!m.value);const{isDragging:T,dragProgress:R}=kt({el:h,isActive:b,isTemporary:y,width:c,touchless:z(e,"touchless"),position:v}),$=d(()=>{const B=y.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):c.value;return T.value?B*R.value:B}),de=d(()=>["top","bottom"].includes(e.location)?0:c.value),{layoutItemStyles:q,layoutItemScrimStyles:me}=ce({id:e.name,order:d(()=>parseInt(e.order,10)),position:v,layoutSize:$,elementSize:de,active:d(()=>b.value||T.value),disableTransitions:d(()=>T.value),absolute:d(()=>e.absolute||V.value&&typeof Z.value!="string")}),{isStuck:Z,stickyStyles:he}=yt({rootEl:h,isSticky:V,layoutItemStyles:q}),J=te(d(()=>typeof e.scrim=="string"?e.scrim:null)),fe=d(()=>({...T.value?{opacity:R.value*.2,transition:"none"}:void 0,...me.value}));return Be({VList:{bgColor:"transparent"}}),X(()=>{const B=t.image||e.image;return S(Ce,null,[S(e.tag,Y({ref:h,onMouseenter:I,onMouseleave:x,class:["v-navigation-drawer",`v-navigation-drawer--${v.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":E.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":y.value,"v-navigation-drawer--persistent":f.value,"v-navigation-drawer--active":b.value,"v-navigation-drawer--sticky":V.value},l.value,k.value,i.value,n.value,s.value,g.value,e.class],style:[w.value,q.value,P.value,he.value,e.style,["top","bottom"].includes(v.value)?{height:"auto"}:{}]},H,o),{default:()=>{var j,G,K;return[B&&S("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?S(lt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):S(We,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&S("div",{class:"v-navigation-drawer__prepend"},[(j=t.prepend)==null?void 0:j.call(t)]),S("div",{class:"v-navigation-drawer__content"},[(G=t.default)==null?void 0:G.call(t)]),t.append&&S("div",{class:"v-navigation-drawer__append"},[(K=t.append)==null?void 0:K.call(t)])]}}),S(Ee,{name:"fade-transition"},{default:()=>[y.value&&(T.value||b.value)&&!!e.scrim&&S("div",Y({class:["v-navigation-drawer__scrim",J.backgroundColorClasses.value],style:[fe.value,J.backgroundColorStyles.value],onClick:()=>{f.value||(b.value=!1)}},H),null)]})])}),{isStuck:Z}}}),Dt=Me({__name:"admin",async setup(e){let r,o;const p=L(!1),{xs:t}=ue(),a=xe(),l=ut(),i=L(!1),k=()=>{a.global.name.value=a.global.current.value.dark?"light":"dark"};try{[r,o]=He(()=>it()),r=await r,o(),r&&(i.value=!0)}catch(s){const n=s;(n.message.includes("401")||n.message.includes("403"))&&(l.removeTokensByService("graze"),Q(`/admin?error=access_denied&error_description=${encodeURIComponent("You are not authorised to access this service.")}`))}const w=()=>{l.removeTokensByService("graze"),Q("/admin")};return(s,n)=>N(i)?(Ie(),Re(st,{key:0},{default:_(()=>[S(mt,{color:"primary","scroll-behavior":"collapse"},{default:_(()=>[S(gt,null,{default:_(()=>n[2]||(n[2]=[_e("Dashboard")])),_:1}),S(Ue),S(ft,{onClick:n[0]||(n[0]=m=>p.value=!N(p))})]),_:1}),S(Bt,{modelValue:N(p),"onUpdate:modelValue":n[1]||(n[1]=m=>Ae(p)?p.value=m:null),location:N(t)?"top":"right",temporary:""},{default:_(()=>[S(nt,null,{default:_(()=>[S(ae,{"prepend-icon":"mdi:mdi-theme-light-dark",onClick:k,title:`${N(a).global.name.value=="dark"?"Light":"Dark"} Mode`},null,8,["title"]),S(ae,{"prepend-icon":"mdi:mdi-logout",onClick:w,title:"Logout"})]),_:1})]),_:1},8,["modelValue","location"]),S(rt,null,{default:_(()=>[Ne(s.$slots,"default")]),_:3})]),_:3})):De("",!0)}});export{Dt as default};
