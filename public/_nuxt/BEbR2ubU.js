import{_ as ve}from"./BoBuT37f.js";import{m as x,r as b,E as ie,G as de,H as pe,o as d,p as k,w as a,b as t,d as V,t as S,z as h,s as m,I as Z,q as ce,c as D,F as K,a as B,u as G,_ as W,J as be,K as we,L as ye,M as Le,N as ke,O as F,P as he,g as Q,Q as Ce,R as ae,S as oe,T as Te,U as _e,A as H,V as Re,y as ne,D as Ae}from"./1motl1L_.js";import{V as C,a as T}from"./CaszdaBq.js";import{V as le,a as me,m as Ie,k as Ee,u as Ne,n as Ve,o as Be,b as re}from"./CH_NLt5E.js";import{V as M,b as Se,c as $e}from"./IVflTecp.js";import{m as Pe,u as Oe,a as De}from"./B6D_2pzo.js";import{u as X,V as Ue,a as Fe}from"./BjKNBowi.js";import{V as qe}from"./BNPHt6QW.js";/* empty css        */import"./B0-061Ev.js";import"./dKoKuYzU.js";import"./DMLObuBb.js";var q=(e=>(e.ADD_CREDENTIAL="ADD_CREDENTIAL",e.COMBINED="COMBINED",e.LOGIN="LOGIN",e.REGISTER="REGISTER",e))(q||{});const Me={buttonCancel:"Cancel",buttonDetails:"Main Website",buttonEditRegistration:"Edit Registration",buttonForgottenPassword:"Forgotten Password",buttonLogin:"Sign In",buttonLoginAmazon:"Amazon",buttonLoginEmail:"Email",buttonLoginFaceBook:"FaceBook",buttonLoginGoogle:"Google",buttonLoginInstagram:"Instagram",buttonLoginMicrosoft:"Microsoft",buttonLoginSteam:"Steam",buttonLoginTelegram:"Telegram",buttonLoginTwitch:"Twitch",buttonLoginTwitter:"Twitter",buttonRegister:"Start Registration",buttonReturnToLogin:"Go Back",buttonViewRegistration:"View Registration",currencySymbol:"Â£",currencyIcon:"mdi:mdi-currency-gbp",enumPER_ROOM:"Per room",enumPER_PERSON:"Per person",formConventionVisible:"Convention Listed to Users",formHeaderSignInEmail:"E-mail",formLabelAvailability:"Availability",formLabelDescription:"Description",formLabelDateStart:"Arrival Date",formLabelDateEnd:"Departure Date",formLabelDetailLink:"Details URL",formLabelDisplayName:"Display Name",formLabelLogo:"Logo",formLabelMaximumCapacity:"Maximum Capacity",formLabelMinimumCapacity:"Minimum Capacity",formLabelName:"Name",formLabelNotes:"Notes",formLabelPrice:"Price",formLabelPriceType:"Policy",formLabelRequiresAccommodation:"Requires Accommodation",formLabelSlug:"URL Path",formLabelTagKey:"Value",formLabelTags:"Tags",formPlaceHolderEmail:"E-mail Address",formPlaceHolderPassword:"Password",headingSignIn:"Sign in with",messageCreateTelegramError1:`An error occurred attempting to validate the Telegram login data.
  Please try again later or contact support.`,messageCreateTelegramError2:`A problem occurred on the login server.
  Please try again later or contact support.`,messageCreateTelegramAccount1:`No account currently exists with your telegram login,
  if you have logged in previously please click "cancel" and try another method such as email login.`,messageCreateTelegramAccount2:'If you wish to create a new account please click "create account".',messageCreateTelegramAccount3:"",messageResetEmail:`If an account linked to your email address is found you will
  receive an email containing a reset link. Please remember to check your spam
  folder if you do not see anything in your inbox.`,messageVerifyNewAccountEmail:`An email has been sent to your address containing
  a link to activate your account. Please remember to check your spam
  folder if you do not see anything in your inbox.`,messageVerifiedNewAccountMessage:`Thank you for verifying your email address.
  Account creation is now in progress. You will be automatically logged in once
  completed.`},A=Me,xe={key:1,class:"ma-auto text-left"},Ge={key:2,class:"ma-auto text-left"},ze={key:3,class:"ma-auto text-left"},je={class:"text-red-darken-1 font-weight-bold"},Je={class:"text-center mt-4"},He=x({__name:"EmailLoginForm",props:{disabled:{type:Boolean,default:!1},variant:{default:()=>q.COMBINED}},emits:["callback"],setup(e,{emit:u}){const w=b(!0);ie();const r=G(),n=u,{smAndUp:o}=de(),c=b(!1),y=b(!1),L=b(!1),f=b(""),E=b(""),$=b(!1),_=b({required:s=>!!s||"Required.",min:s=>s.length>=8||"Min 8 characters",email:s=>!!s.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Valid email address required"}),l=b(""),R=()=>(l.value="",!(_.value.required(f.value)!==!0||_.value.email(f.value)!==!0||_.value.required(E.value)!==!0||_.value.min(E.value)!==!0)),i=s=>{s.preventDefault(),R()&&n("callback",{mode:"login",username:f.value,password:E.value})},p=s=>{s.preventDefault(),(l.value="",!(_.value.required(f.value)!==!0||_.value.email(f.value)!==!0||_.value.required(E.value)!==!0||_.value.min(E.value)!==!0))&&n("callback",{mode:"create",username:f.value,password:E.value})},z=s=>{s.preventDefault(),(l.value="",!(_.value.required(f.value)!==!0||_.value.email(f.value)!==!0))&&n("callback",{mode:"link",username:f.value,password:E.value})};return(s,v)=>{const Y=pe("router-link");return w.value?(d(),k(me,{key:0,onSubmit:ce(i,["stop"]),disabled:s.disabled,id:"login-form",action:`/${m(r).public.issuerUri}/connect/auth/internal`,method:"post"},{default:a(()=>[t(T,null,{default:a(()=>[t(C,null,{default:a(()=>[t(le,{margin:"normal",required:"",id:"username",label:"Email Address",name:"username",autocomplete:"username",autofocus:"",variant:"outlined",modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=j=>f.value=j),rules:[_.value.required,_.value.email],clearable:!0},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(C,null,{default:a(()=>[t(le,{margin:"normal",required:"",name:"password",label:"Password",type:$.value?"text":"password",id:"password",autocomplete:"current-password",variant:"outlined",modelValue:E.value,"onUpdate:modelValue":v[1]||(v[1]=j=>E.value=j),"append-inner-icon":$.value?"mdi:mdi-eye-off":"mdi:mdi-eye","onClick:appendInner":v[2]||(v[2]=j=>$.value=!$.value),counter:"",hint:"At least 8 characters",rules:[_.value.required,_.value.min],clearable:!1},null,8,["type","modelValue","append-inner-icon","rules"])]),_:1})]),_:1}),l.value?(d(),k(T,{key:0},{default:a(()=>[t(C,{class:"text-red-darken-1 font-weight-bold"},{default:a(()=>[V(S(l.value),1)]),_:1})]),_:1})):h("",!0),t(T,{justify:"space-between"},{default:a(()=>[s.variant===m(q).COMBINED||s.variant===m(q).REGISTER?(d(),k(C,{key:0,cols:"12",sm:"7",order:"2","order-sm":"1",class:Z(`${m(o)?"":"text-center"}`)},{default:a(()=>[t(M,{color:"orange-darken-2",disabled:s.disabled,class:"w-100","prepend-icon":"mdi:mdi-account-edit",onClick:p},{default:a(()=>v[3]||(v[3]=[V(" Create Account ")])),_:1},8,["disabled"])]),_:1},8,["class"])):h("",!0),s.variant===m(q).COMBINED||s.variant===m(q).LOGIN?(d(),k(C,{key:1,cols:"12",sm:"5",order:"1","order-sm":"2",class:Z(`${m(o)?"text-right":"text-center"}`)},{default:a(()=>[t(M,{color:"success",disabled:s.disabled,type:"submit",class:"w-100","prepend-icon":"mdi:mdi-login"},{default:a(()=>v[4]||(v[4]=[V(" Sign In ")])),_:1},8,["disabled"])]),_:1},8,["class"])):h("",!0),s.variant===m(q).ADD_CREDENTIAL?(d(),k(C,{key:2,cols:"12",sm:"6",class:"flex-grow-0"},{default:a(()=>[t(M,{color:"orange-darken-2",disabled:s.disabled},{default:a(()=>v[5]||(v[5]=[V(" Add Email ")])),_:1},8,["disabled"])]),_:1})):h("",!0)]),_:1}),s.variant===m(q).COMBINED||s.variant===m(q).LOGIN?(d(),k(T,{key:1},{default:a(()=>[t(C,null,{default:a(()=>[t(M,{onClick:z,class:"w-100",color:"grey",disabled:s.disabled,"prepend-icon":"mdi:mdi-account-question"},{default:a(()=>[V(S(m(A).buttonForgottenPassword),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):h("",!0)]),_:1},8,["disabled","action"])):c.value?(d(),D("p",xe,S(m(A).messageResetEmail),1)):y.value?(d(),D("p",Ge,S(m(A).messageVerifyNewAccountEmail),1)):L.value?(d(),D("p",ze,[V(S(m(A).messageVerifiedNewAccountMessage)+" ",1),l.value?(d(),D(K,{key:0},[v[9]||(v[9]=B("br",null,null,-1)),v[10]||(v[10]=B("br",null,null,-1)),B("span",je,[v[6]||(v[6]=V(" An error occurred creating or recovering account:")),v[7]||(v[7]=B("br",null,null,-1)),V(" "+S(l.value),1)]),v[11]||(v[11]=B("br",null,null,-1)),v[12]||(v[12]=B("br",null,null,-1)),v[13]||(v[13]=B("span",{class:"text-red-darken-4"}," Please contact registration if you require further assistance. ",-1)),B("div",Je,[t(Y,{to:"/"},{default:a(()=>[t(M,{color:"red"},{default:a(()=>v[8]||(v[8]=[V("Close")])),_:1})]),_:1})])],64)):h("",!0)])):h("",!0)}}}),Ke=W(He,[["__scopeId","data-v-928490fa"]]),We=be({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Pe(),...Ie(),...we(Ee({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Ye=ye()({name:"VOtpInput",props:We(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,u){let{attrs:w,emit:r,slots:n}=u;const{dimensionStyles:o}=Oe(e),{isFocused:c,focus:y,blur:L}=Ne(e),f=Le(e,"modelValue","",g=>g==null?[]:String(g).split(""),g=>g.join("")),{t:E}=ke(),$=F(()=>Number(e.length)),_=F(()=>Array($.value).fill(0)),l=b(-1),R=b(),i=b([]),p=F(()=>i.value[l.value]);function z(){if(te(p.value.value)){p.value.value="";return}const g=f.value.slice(),I=p.value.value;g[l.value]=I;let P=null;l.value>f.value.length?P=f.value.length+1:l.value+1!==$.value&&(P="next"),f.value=g,P&&oe(R.value,P)}function s(g){const I=f.value.slice(),P=l.value;let O=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(g.key)&&(g.preventDefault(),g.key==="ArrowLeft"?O="prev":g.key==="ArrowRight"?O="next":["Backspace","Delete"].includes(g.key)&&(I[l.value]="",f.value=I,l.value>0&&g.key==="Backspace"?O="prev":requestAnimationFrame(()=>{var N;(N=i.value[P])==null||N.select()})),requestAnimationFrame(()=>{O!=null&&oe(R.value,O)}))}function v(g,I){var O,N;I.preventDefault(),I.stopPropagation();const P=((O=I==null?void 0:I.clipboardData)==null?void 0:O.getData("Text").slice(0,$.value))??"";te(P)||(f.value=P.split(""),(N=i.value)==null||N[g].blur())}function Y(){f.value=[]}function j(g,I){y(),l.value=I}function ge(){L(),l.value=-1}function te(g){return e.type==="number"&&/[^0-9]/g.test(g)}return he({VField:{color:F(()=>e.color),bgColor:F(()=>e.color),baseColor:F(()=>e.baseColor),disabled:F(()=>e.disabled),error:F(()=>e.error),variant:F(()=>e.variant)}},{scoped:!0}),Q(f,g=>{g.length===$.value&&r("finish",g.join(""))},{deep:!0}),Q(l,g=>{g<0||Te(()=>{var I;(I=i.value[g])==null||I.select()})}),De(()=>{var P;const[g,I]=Ce(w);return t("div",ae({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},g),[t("div",{ref:R,class:"v-otp-input__content",style:[o.value]},[_.value.map((O,N)=>t(K,null,[e.divider&&N!==0&&t("span",{class:"v-otp-input__divider"},[e.divider]),t(Ve,{focused:c.value&&e.focusAll||l.value===N,key:N},{...n,loader:void 0,default:()=>t("input",{ref:J=>i.value[N]=J,"aria-label":E(e.label,N+1),autofocus:N===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:f.value[N],onInput:z,onFocus:J=>j(J,N),onBlur:ge,onKeydown:s,onPaste:J=>v(N,J)},null)})])),t("input",ae({class:"v-otp-input-input",type:"hidden"},I,{value:f.value.join("")}),null),t(Be,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var O;return[((O=n.loader)==null?void 0:O.call(n))??t(Se,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(P=n.default)==null?void 0:P.call(n)])])}),{blur:()=>{var g;(g=i.value)==null||g.some(I=>I.blur())},focus:()=>{var g;(g=i.value)==null||g[0].focus()},reset:Y,isFocused:c}}}),Ze=x({__name:"OTPLoginForm",props:{email:{},disabled:{type:Boolean,default:!1}},emits:["callback"],setup(e,{emit:u}){b(!0),ie();const w=u;de();const r=b(""),n=b({required:y=>!!y||"Required.",min:y=>y.length>=6||"Min 6 characters"}),o=b(""),c=y=>{y.preventDefault(),(o.value="",!(n.value.required(r.value)!==!0||n.value.min(r.value)!==!0))&&(console.log("emit baby"),w("callback",{mode:"validate",username:e.email,password:r.value}))};return(y,L)=>(d(),k(me,{onSubmit:L[1]||(L[1]=ce(()=>{},["stop"])),disabled:y.disabled},{default:a(()=>[L[3]||(L[3]=B("h3",{class:"text-h6 mb-2"}," Please enter the one time password to verify your account ",-1)),B("p",null,"A code has been sent to "+S(y.email),1),t(T,null,{default:a(()=>[t(C,null,{default:a(()=>[t(Ye,{disabled:y.disabled,length:"6",modelValue:r.value,"onUpdate:modelValue":L[0]||(L[0]=f=>r.value=f),rules:[n.value.required,n.value.min]},null,8,["disabled","modelValue","rules"])]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(C,null,{default:a(()=>[t(M,{disabled:r.value.length!=6,type:"submit",onClick:c,color:"primary",variant:"flat",class:"w-100"},{default:a(()=>L[2]||(L[2]=[V(" Validate ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"]))}}),Qe=W(Ze,[["__scopeId","data-v-c50d85ca"]]),ee=()=>{const e=_e(),u=JSON.stringify(e.query),w=new $e;return w.parseJSON(u),w},Xe=async(e,u,w=!1)=>{const r=G();return await $fetch(`${r.public.issuerUri}/connect/auth/internal`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:u.username,password:u.password},new:w}),parseResponse:n=>{const o=JSON.parse(n);if(o.RedirectURI)return o.RedirectURI;throw n}})},se=async(e,u,w="",r=!1)=>{const n=G();return await $fetch(`${n.public.issuerUri}/connect/email/link`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:u,password:w},new:r})})},et=async(e,u,w=!1)=>{const r=G();return await $fetch(`${r.public.issuerUri}/connect/auth/otp`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:u.username,password:u.password},new:w}),parseResponse:n=>{const o=JSON.parse(n);if(o.RedirectURI)return o.RedirectURI;throw n}})},tt={class:"ma-auto",style:{"max-width":"450px"}},at=x({__name:"email",props:{variant:{default:()=>q.COMBINED}},emits:["cancel"],setup(e,{emit:u}){const w=u,r=X(),n=b(""),o=b("email"),c=b(!1),y=ee(),L=b(!1),f=b(),E=i=>{switch(i.mode.toLocaleString()){case"create":return $(i);case"link":return _(i.username);case"login":return R(i);case"register":return;case"validate":return l(i)}},$=async i=>{L.value=!1;const{token:p}=await se(y,i.username,i.password,!0);n.value=i.username,f.value=p,o.value="otp_create"},_=async i=>{L.value=!1;const{token:p}=await se(y,i);n.value=i,f.value=p,o.value="otp_validate"},l=async i=>{c.value=!0;const p=await et(y,{username:i.username,password:`${f.value}:${i.password}`},o.value=="otp_create");if(p){const s=new URL(p).searchParams.get("error");if((s==null?void 0:s.toLowerCase())!="invalid_request"&&(s==null?void 0:s.toLowerCase())!="access_denied"){H(p,{external:!0});return}}L.value=!0,c.value=!1,o.value="email"},R=async i=>{c.value=!0,L.value=!1;const p=await Xe(y,i);if(p){const s=new URL(p).searchParams.get("error");if((s==null?void 0:s.toLowerCase())=="invalid_request"){L.value=!0,c.value=!1;return}H(p,{external:!0})}};return(i,p)=>(d(),D("div",tt,[m(L)?(d(),k(T,{key:0},{default:a(()=>[t(C,null,{default:a(()=>[t(Ue,{type:"error"},{default:a(()=>[t(Fe,null,{default:a(()=>p[1]||(p[1]=[V("Login Failed")])),_:1}),p[2]||(p[2]=V(" There was problem with your login attempt. It may be the account doesn't exist or your password was incorrect. You may have also created your account using a Telegram login instead. "))]),_:1})]),_:1})]),_:1})):h("",!0),t(T,null,{default:a(()=>[t(C,null,{default:a(()=>[m(o)=="email"?(d(),k(Ke,{key:0,disabled:m(c),"redirect-url":m(r).href,variant:i.variant,onCallback:E},null,8,["disabled","redirect-url","variant"])):m(o)=="otp_create"||m(o)=="otp_validate"?(d(),k(Qe,{key:1,disabled:m(c),email:m(n),onCallback:E},null,8,["disabled","email"])):h("",!0)]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(C,{class:"text-left"},{default:a(()=>[t(M,{color:"error",onClick:p[0]||(p[0]=z=>w("cancel")),class:"w-100","prepend-icon":"mdi:mdi-arrow-left-circle"},{default:a(()=>p[3]||(p[3]=[V(" Go Back ")])),_:1})]),_:1})]),_:1})]))}}),ot={key:0,class:"ml-1"},nt=x({__name:"AuthButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(e){const u={amazon:{icon:"fa:fas fa-brands fa-amazon",label:A.buttonLoginAmazon,name:"Amazon"},email:{icon:"mdi:mdi-email",label:A.buttonLoginEmail,name:"Email"},facebook:{icon:"fa:fa fa-brands fa-facebook",label:A.buttonLoginFaceBook,name:"FaceBook"},google:{icon:"fa:fa fa-brands fa-google",label:A.buttonLoginGoogle,name:"Google"},internal:{icon:"mdi:mdi-email",label:A.buttonLoginEmail,name:"Email"},instagram:{icon:"fa:fa fa-brands fa-instagram",label:A.buttonLoginInstagram,name:"Instagram"},microsoft:{icon:"fa:fa fa-brands fa-windows",label:A.buttonLoginMicrosoft,name:"Microsoft"},steam:{icon:"fa:fa fa-brands fa-steam",label:A.buttonLoginSteam,name:"Steam"},telegram:{icon:"fa:fa fa-brands fa-telegram",label:A.buttonLoginTelegram,name:"Telegram"},twitch:{icon:"fa:fa fa-brands fa-twitch",label:A.buttonLoginTwitch,name:"Twitch"},twitter:{icon:"fa:fa fa-brands fa-twitter",label:A.buttonLoginTwitter,name:"Twitter"}},w=b(u[e.source.toLowerCase()].label||""),r=b(u[e.source.toLowerCase()].icon||""),n=F(()=>{var o,c;if(e.source.toLowerCase()==="internal"||e.source.toLowerCase()==="email")return(o=e.credential)==null?void 0:o.Email;try{const y=JSON.parse(((c=e.credential)==null?void 0:c.Data)||"{}");switch(e.source.toLowerCase()){case"telegram":return`@${y.username||y.id}`}}catch{}return""});return(o,c)=>(d(),k(M,{"append-icon":o.appendIcon,"prepend-icon":r.value,class:Z(`${o.source.toLowerCase()} ${e.class}`)},{default:a(()=>[V(S(w.value)+" ",1),o.showUsername&&o.credential?(d(),D("small",ot,"("+S(n.value)+")",1)):h("",!0)]),_:1},8,["append-icon","prepend-icon","class"]))}}),fe=W(nt,[["__scopeId","data-v-b98baed0"]]),ue=async(e,u,w=!1)=>{const r=G();return await $fetch(`${r.public.issuerUri}/connect/auth/telegram`,{method:"post",body:JSON.stringify({oauth:e,telegram:u,new:w}),parseResponse:n=>{const o=JSON.parse(n);if(o.RedirectURI)return o.RedirectURI;throw n}})},lt={key:0,class:"my-2"},rt={key:1,class:"my-2"},st={class:"my-2"},ut={class:"my-2"},it={class:"my-2"},dt=x({__name:"TelegramButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1}},emits:["cancel"],setup(e,{emit:u}){const w=u,r=G();X();const n=ee(),o=b(!1),c=b(!1),y=b(0),L=b();b();const f=b(),E=async()=>{if(o.value=!1,!L.value)return;const l=await ue(n,L.value,!0);l&&H(l,{external:!0})},$=()=>{{if(!window.Telegram||!window.Telegram.Login||!window.Telegram.Login.auth){console.error("Telegram not initialised");return}window.Telegram.Login.auth({bot_id:r.public.telegramBotId||"",request_access:!0},l=>{l||console.error("Telegram Authorization Failed"),_(l)})}},_=async l=>{const R=await ue(n,l,!1);if(R){const p=new URL(R).searchParams.get("error");p?p=="access_denied"?(o.value=!0,L.value=l):p=="invalid_request"?(c.value=!0,y.value=1):p=="server_error"&&(c.value=!0,y.value=2):H(R,{external:!0})}};return Re(()=>{const l=document.createElement("script");l.async=!0,l.src="https://telegram.org/js/telegram-widget.js?22",f.value.appendChild(l)}),(l,R)=>(d(),D(K,null,[t(T,null,{default:a(()=>[t(C,{class:"text-center"},{default:a(()=>[B("div",{ref_key:"telegram",ref:f},null,512),t(fe,{"append-icon":l.appendIcon,credential:l.credential,"show-username":l.showUsername,source:"telegram",class:"d-flex justify-start w-100",onClick:$},null,8,["append-icon","credential","show-username"])]),_:1})]),_:1}),t(re,{modelValue:m(c),"onUpdate:modelValue":R[0]||(R[0]=i=>ne(c)?c.value=i:null),"show-save-action":!1,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Error Attempting Telegram Login","hide-extension":!0,"remove-button-spacer":!0,"close-action-label":"Close",onClose:R[1]||(R[1]=i=>c.value=!1)},{default:a(()=>[m(y)===1?(d(),D("p",lt,S(m(A).messageCreateTelegramError1),1)):h("",!0),m(y)===2?(d(),D("p",rt,S(m(A).messageCreateTelegramError2),1)):h("",!0)]),_:1},8,["modelValue"]),t(re,{modelValue:m(o),"onUpdate:modelValue":R[2]||(R[2]=i=>ne(o)?o.value=i:null),"show-save-action":!0,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Create new account","hide-extension":!0,"save-button-label":"Create Account",onSave:E,onClose:R[3]||(R[3]=i=>w("cancel"))},{default:a(()=>[B("p",st,S(m(A).messageCreateTelegramAccount1),1),B("p",ut,S(m(A).messageCreateTelegramAccount2),1),B("p",it,S(m(A).messageCreateTelegramAccount3),1)]),_:1},8,["modelValue"])],64))}}),ct=x({__name:"LoginButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},credential:{},params:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(e){return(u,w)=>u.source=="telegram"?(d(),k(dt,{key:0})):(d(),k(fe,{key:1,"append-icon":u.appendIcon,credential:u.credential,"show-username":u.showUsername,source:u.source,class:"d-flex justify-start w-100"},null,8,["append-icon","credential","show-username","source"]))}}),U=W(ct,[["__scopeId","data-v-9a086b0f"]]),mt=x({__name:"LoginButtons",props:{showAmazonLogin:{type:Boolean,default:!1},showEmailLogin:{type:Boolean,default:!1},showFaceBookLogin:{type:Boolean,default:!1},showGoogleLogin:{type:Boolean,default:!1},showInstagramLogin:{type:Boolean,default:!1},showMicrosoftLogin:{type:Boolean,default:!1},showSteamLogin:{type:Boolean,default:!1},showTelegramLogin:{type:Boolean,default:!1},showTwitchLogin:{type:Boolean,default:!1},showTwitterLogin:{type:Boolean,default:!1}},emits:["login"],setup(e,{emit:u}){X(),ee();const w=u,r=b("");return Q(r,()=>{w("login",r.value)}),(n,o)=>(d(),D("div",null,[n.showEmailLogin?(d(),k(T,{key:0,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"internal",onClick:o[0]||(o[0]=c=>r.value="internal")})]),_:1})]),_:1})):h("",!0),n.showAmazonLogin?(d(),k(T,{key:1,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"amazon",onClick:o[1]||(o[1]=c=>r.value="amazon")})]),_:1})]),_:1})):h("",!0),n.showFaceBookLogin?(d(),k(T,{key:2,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"facebook",onClick:o[2]||(o[2]=c=>r.value="facebook")})]),_:1})]),_:1})):h("",!0),n.showGoogleLogin?(d(),k(T,{key:3,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"google",onClick:o[3]||(o[3]=c=>r.value="google")})]),_:1})]),_:1})):h("",!0),n.showInstagramLogin?(d(),k(T,{key:4,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"instagram",onClick:o[4]||(o[4]=c=>r.value="instagram")})]),_:1})]),_:1})):h("",!0),n.showMicrosoftLogin?(d(),k(T,{key:5,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"microsoft",onClick:o[5]||(o[5]=c=>r.value="microsoft")})]),_:1})]),_:1})):h("",!0),n.showSteamLogin?(d(),k(T,{key:6,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"steam",onClick:o[6]||(o[6]=c=>r.value="steam")})]),_:1})]),_:1})):h("",!0),n.showTelegramLogin?(d(),k(T,{key:7,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"telegram"})]),_:1})]),_:1})):h("",!0),n.showTwitchLogin?(d(),k(T,{key:8,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"twitch",onClick:o[7]||(o[7]=c=>r.value="twitch")})]),_:1})]),_:1})):h("",!0),n.showTwitterLogin?(d(),k(T,{key:9,dense:!0},{default:a(()=>[t(C,null,{default:a(()=>[t(U,{source:"twitter",onClick:o[8]||(o[8]=c=>r.value="twitter")})]),_:1})]),_:1})):h("",!0)]))}}),ft=()=>{try{const e=Ae(),u=e.currentRoute.value.query.state||"",w=new URL(e.currentRoute.value.query.redirect_uri||"");return w.searchParams.set("state",u),w.toString()}catch(e){console.error(e)}return""},gt={class:"text-center"},At=x({__name:"index",emits:["pageTitle"],setup(e,{emit:u}){const w=G();u("pageTitle","Login");const n=ft(),o=b("BUTTONS"),c=y=>{switch(y){case"internal":o.value="INTERNAL_LOGIN";break}};return(y,L)=>{const f=ve;return d(),k(qe,null,{default:a(()=>[B("h1",gt,S(m(w).public.organisationName),1),m(o)=="BUTTONS"?(d(),D(K,{key:0},[t(mt,{showEmailLogin:!0,showTelegramLogin:!0,onLogin:c,style:{"max-width":"250px"},class:"ma-auto mb-5"}),t(T,null,{default:a(()=>[t(C,{class:"pa-0 text-center"},{default:a(()=>[t(f,{href:m(n)},{default:a(()=>[t(M,{variant:"text"},{default:a(()=>L[1]||(L[1]=[V(" Cancel ")])),_:1})]),_:1},8,["href"])]),_:1})]),_:1})],64)):h("",!0),m(o)=="INTERNAL_LOGIN"?(d(),k(at,{key:1,onCancel:L[0]||(L[0]=E=>o.value="BUTTONS")})):h("",!0)]),_:1})}}});export{At as default};
