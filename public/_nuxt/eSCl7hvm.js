import{_ as ve}from"./C_Bd0dhl.js";import{m as x,r as w,E as ie,G as de,H as pe,o as c,p as h,w as a,b as e,d as V,t as S,z as T,s as p,I as Z,q as ce,c as M,F as K,a as E,u as G,_ as W,J as be,K as we,L as ye,M as Le,N as ke,O as U,P as he,g as Q,Q as Ce,R as ae,S as ne,T as Te,U as Re,A as H,V as _e,y as oe,D as Ae}from"./CGLYZxbj.js";import{V as C,a as R}from"./FVZbzb5a.js";import{V as le,a as me,m as Ie,k as Ee,u as Ne,n as Ve,o as Be,b as re}from"./B2xuO5hc.js";import{V as q,b as Se,c as $e}from"./DCfPMuVE.js";import{m as Oe,u as Pe,a as De}from"./CllhuN38.js";import{u as X,V as Ue,a as Fe}from"./bnq-m3WV.js";import{V as qe}from"./Lzo3XbbA.js";/* empty css        */import"./CNK8T9JQ.js";import"./alaOlWzo.js";import"./B4zGovbQ.js";var F=(t=>(t.ADD_CREDENTIAL="ADD_CREDENTIAL",t.COMBINED="COMBINED",t.LOGIN="LOGIN",t.REGISTER="REGISTER",t))(F||{});const Me={buttonCancel:"Cancel",buttonDetails:"Main Website",buttonEditRegistration:"Edit Registration",buttonForgottenPassword:"Forgotten Password",buttonLogin:"Sign In",buttonLoginAmazon:"Amazon",buttonLoginEmail:"Email",buttonLoginFaceBook:"FaceBook",buttonLoginGoogle:"Google",buttonLoginInstagram:"Instagram",buttonLoginMicrosoft:"Microsoft",buttonLoginSteam:"Steam",buttonLoginTelegram:"Telegram",buttonLoginTwitch:"Twitch",buttonLoginTwitter:"Twitter",buttonRegister:"Start Registration",buttonReturnToLogin:"Go Back",buttonViewRegistration:"View Registration",currencySymbol:"Â£",currencyIcon:"mdi:mdi-currency-gbp",enumPER_ROOM:"Per room",enumPER_PERSON:"Per person",formConventionVisible:"Convention Listed to Users",formHeaderSignInEmail:"E-mail",formLabelAvailability:"Availability",formLabelDescription:"Description",formLabelDateStart:"Arrival Date",formLabelDateEnd:"Departure Date",formLabelDetailLink:"Details URL",formLabelDisplayName:"Display Name",formLabelLogo:"Logo",formLabelMaximumCapacity:"Maximum Capacity",formLabelMinimumCapacity:"Minimum Capacity",formLabelName:"Name",formLabelNotes:"Notes",formLabelPrice:"Price",formLabelPriceType:"Policy",formLabelRequiresAccommodation:"Requires Accommodation",formLabelSlug:"URL Path",formLabelTagKey:"Value",formLabelTags:"Tags",formPlaceHolderEmail:"E-mail Address",formPlaceHolderPassword:"Password",headingSignIn:"Sign in with",messageCreateTelegramError1:`An error occurred attempting to validate the Telegram login data.
  Please try again later or contact support.`,messageCreateTelegramAccount1:`No account currently exists with your telegram login,
  if you have logged in previously please click "cancel" and try another method such as email login.`,messageCreateTelegramAccount2:'If you wish to create a new account please click "create account".',messageCreateTelegramAccount3:"",messageResetEmail:`If an account linked to your email address is found you will
  receive an email containing a reset link. Please remember to check your spam
  folder if you do not see anything in your inbox.`,messageVerifyNewAccountEmail:`An email has been sent to your address containing
  a link to activate your account. Please remember to check your spam
  folder if you do not see anything in your inbox.`,messageVerifiedNewAccountMessage:`Thank you for verifying your email address.
  Account creation is now in progress. You will be automatically logged in once
  completed.`},A=Me,xe={key:1,class:"ma-auto text-left"},Ge={key:2,class:"ma-auto text-left"},ze={key:3,class:"ma-auto text-left"},je={class:"text-red-darken-1 font-weight-bold"},Je={class:"text-center mt-4"},He=x({__name:"EmailLoginForm",props:{disabled:{type:Boolean,default:!1},variant:{default:()=>F.COMBINED}},emits:["callback"],setup(t,{emit:s}){const b=w(!0);ie();const l=G(),o=s,{smAndUp:n}=de(),i=w(!1),y=w(!1),L=w(!1),m=w(""),I=w(""),$=w(!1),u=w({required:r=>!!r||"Required.",min:r=>r.length>=8||"Min 8 characters",email:r=>!!r.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Valid email address required"}),d=w(""),B=()=>(d.value="",!(u.value.required(m.value)!==!0||u.value.email(m.value)!==!0||u.value.required(I.value)!==!0||u.value.min(I.value)!==!0)),f=r=>{r.preventDefault(),B()&&o("callback",{mode:"login",username:m.value,password:I.value})},k=r=>{r.preventDefault(),(d.value="",!(u.value.required(m.value)!==!0||u.value.email(m.value)!==!0||u.value.required(I.value)!==!0||u.value.min(I.value)!==!0))&&o("callback",{mode:"create",username:m.value,password:I.value})},z=r=>{r.preventDefault(),(d.value="",!(u.value.required(m.value)!==!0||u.value.email(m.value)!==!0))&&o("callback",{mode:"link",username:m.value,password:I.value})};return(r,v)=>{const Y=pe("router-link");return b.value?(c(),h(me,{key:0,onSubmit:ce(f,["stop"]),disabled:r.disabled,id:"login-form",action:`/${p(l).public.issuerUri}/connect/auth/internal`,method:"post"},{default:a(()=>[e(R,null,{default:a(()=>[e(C,null,{default:a(()=>[e(le,{margin:"normal",required:"",id:"username",label:"Email Address",name:"username",autocomplete:"username",autofocus:"",variant:"outlined",modelValue:m.value,"onUpdate:modelValue":v[0]||(v[0]=j=>m.value=j),rules:[u.value.required,u.value.email],clearable:!0},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(C,null,{default:a(()=>[e(le,{margin:"normal",required:"",name:"password",label:"Password",type:$.value?"text":"password",id:"password",autocomplete:"current-password",variant:"outlined",modelValue:I.value,"onUpdate:modelValue":v[1]||(v[1]=j=>I.value=j),"append-inner-icon":$.value?"mdi:mdi-eye-off":"mdi:mdi-eye","onClick:appendInner":v[2]||(v[2]=j=>$.value=!$.value),counter:"",hint:"At least 8 characters",rules:[u.value.required,u.value.min],clearable:!1},null,8,["type","modelValue","append-inner-icon","rules"])]),_:1})]),_:1}),d.value?(c(),h(R,{key:0},{default:a(()=>[e(C,{class:"text-red-darken-1 font-weight-bold"},{default:a(()=>[V(S(d.value),1)]),_:1})]),_:1})):T("",!0),e(R,{justify:"space-between"},{default:a(()=>[r.variant===p(F).COMBINED||r.variant===p(F).REGISTER?(c(),h(C,{key:0,cols:"12",sm:"7",order:"2","order-sm":"1",class:Z(`${p(n)?"":"text-center"}`)},{default:a(()=>[e(q,{color:"orange-darken-2",disabled:r.disabled,class:"w-100","prepend-icon":"mdi:mdi-account-edit",onClick:k},{default:a(()=>v[3]||(v[3]=[V(" Create Account ")])),_:1},8,["disabled"])]),_:1},8,["class"])):T("",!0),r.variant===p(F).COMBINED||r.variant===p(F).LOGIN?(c(),h(C,{key:1,cols:"12",sm:"5",order:"1","order-sm":"2",class:Z(`${p(n)?"text-right":"text-center"}`)},{default:a(()=>[e(q,{color:"success",disabled:r.disabled,type:"submit",class:"w-100","prepend-icon":"mdi:mdi-login"},{default:a(()=>v[4]||(v[4]=[V(" Sign In ")])),_:1},8,["disabled"])]),_:1},8,["class"])):T("",!0),r.variant===p(F).ADD_CREDENTIAL?(c(),h(C,{key:2,cols:"12",sm:"6",class:"flex-grow-0"},{default:a(()=>[e(q,{color:"orange-darken-2",disabled:r.disabled},{default:a(()=>v[5]||(v[5]=[V(" Add Email ")])),_:1},8,["disabled"])]),_:1})):T("",!0)]),_:1}),r.variant===p(F).COMBINED||r.variant===p(F).LOGIN?(c(),h(R,{key:1},{default:a(()=>[e(C,null,{default:a(()=>[e(q,{onClick:z,class:"w-100",color:"grey",disabled:r.disabled,"prepend-icon":"mdi:mdi-account-question"},{default:a(()=>[V(S(p(A).buttonForgottenPassword),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):T("",!0)]),_:1},8,["disabled","action"])):i.value?(c(),M("p",xe,S(p(A).messageResetEmail),1)):y.value?(c(),M("p",Ge,S(p(A).messageVerifyNewAccountEmail),1)):L.value?(c(),M("p",ze,[V(S(p(A).messageVerifiedNewAccountMessage)+" ",1),d.value?(c(),M(K,{key:0},[v[9]||(v[9]=E("br",null,null,-1)),v[10]||(v[10]=E("br",null,null,-1)),E("span",je,[v[6]||(v[6]=V(" An error occurred creating or recovering account:")),v[7]||(v[7]=E("br",null,null,-1)),V(" "+S(d.value),1)]),v[11]||(v[11]=E("br",null,null,-1)),v[12]||(v[12]=E("br",null,null,-1)),v[13]||(v[13]=E("span",{class:"text-red-darken-4"}," Please contact registration if you require further assistance. ",-1)),E("div",Je,[e(Y,{to:"/"},{default:a(()=>[e(q,{color:"red"},{default:a(()=>v[8]||(v[8]=[V("Close")])),_:1})]),_:1})])],64)):T("",!0)])):T("",!0)}}}),Ke=W(He,[["__scopeId","data-v-928490fa"]]),We=be({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Oe(),...Ie(),...we(Ee({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Ye=ye()({name:"VOtpInput",props:We(),emits:{finish:t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,s){let{attrs:b,emit:l,slots:o}=s;const{dimensionStyles:n}=Pe(t),{isFocused:i,focus:y,blur:L}=Ne(t),m=Le(t,"modelValue","",g=>g==null?[]:String(g).split(""),g=>g.join("")),{t:I}=ke(),$=U(()=>Number(t.length)),u=U(()=>Array($.value).fill(0)),d=w(-1),B=w(),f=w([]),k=U(()=>f.value[d.value]);function z(){if(te(k.value.value)){k.value.value="";return}const g=m.value.slice(),_=k.value.value;g[d.value]=_;let O=null;d.value>m.value.length?O=m.value.length+1:d.value+1!==$.value&&(O="next"),m.value=g,O&&ne(B.value,O)}function r(g){const _=m.value.slice(),O=d.value;let P=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(g.key)&&(g.preventDefault(),g.key==="ArrowLeft"?P="prev":g.key==="ArrowRight"?P="next":["Backspace","Delete"].includes(g.key)&&(_[d.value]="",m.value=_,d.value>0&&g.key==="Backspace"?P="prev":requestAnimationFrame(()=>{var N;(N=f.value[O])==null||N.select()})),requestAnimationFrame(()=>{P!=null&&ne(B.value,P)}))}function v(g,_){var P,N;_.preventDefault(),_.stopPropagation();const O=((P=_==null?void 0:_.clipboardData)==null?void 0:P.getData("Text").slice(0,$.value))??"";te(O)||(m.value=O.split(""),(N=f.value)==null||N[g].blur())}function Y(){m.value=[]}function j(g,_){y(),d.value=_}function ge(){L(),d.value=-1}function te(g){return t.type==="number"&&/[^0-9]/g.test(g)}return he({VField:{color:U(()=>t.color),bgColor:U(()=>t.color),baseColor:U(()=>t.baseColor),disabled:U(()=>t.disabled),error:U(()=>t.error),variant:U(()=>t.variant)}},{scoped:!0}),Q(m,g=>{g.length===$.value&&l("finish",g.join(""))},{deep:!0}),Q(d,g=>{g<0||Te(()=>{var _;(_=f.value[g])==null||_.select()})}),De(()=>{var O;const[g,_]=Ce(b);return e("div",ae({class:["v-otp-input",{"v-otp-input--divided":!!t.divider},t.class],style:[t.style]},g),[e("div",{ref:B,class:"v-otp-input__content",style:[n.value]},[u.value.map((P,N)=>e(K,null,[t.divider&&N!==0&&e("span",{class:"v-otp-input__divider"},[t.divider]),e(Ve,{focused:i.value&&t.focusAll||d.value===N,key:N},{...o,loader:void 0,default:()=>e("input",{ref:J=>f.value[N]=J,"aria-label":I(t.label,N+1),autofocus:N===0&&t.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:t.disabled,inputmode:t.type==="number"?"numeric":"text",min:t.type==="number"?0:void 0,maxlength:"1",placeholder:t.placeholder,type:t.type==="number"?"text":t.type,value:m.value[N],onInput:z,onFocus:J=>j(J,N),onBlur:ge,onKeydown:r,onPaste:J=>v(N,J)},null)})])),e("input",ae({class:"v-otp-input-input",type:"hidden"},_,{value:m.value.join("")}),null),e(Be,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!t.loading,persistent:!0},{default:()=>{var P;return[((P=o.loader)==null?void 0:P.call(o))??e(Se,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(O=o.default)==null?void 0:O.call(o)])])}),{blur:()=>{var g;(g=f.value)==null||g.some(_=>_.blur())},focus:()=>{var g;(g=f.value)==null||g[0].focus()},reset:Y,isFocused:i}}}),Ze=x({__name:"OTPLoginForm",props:{email:{},disabled:{type:Boolean,default:!1}},emits:["callback"],setup(t,{emit:s}){w(!0),ie();const b=s;de();const l=w(""),o=w({required:y=>!!y||"Required.",min:y=>y.length>=6||"Min 6 characters"}),n=w(""),i=y=>{y.preventDefault(),(n.value="",!(o.value.required(l.value)!==!0||o.value.min(l.value)!==!0))&&(console.log("emit baby"),b("callback",{mode:"validate",username:t.email,password:l.value}))};return(y,L)=>(c(),h(me,{onSubmit:L[1]||(L[1]=ce(()=>{},["stop"])),disabled:y.disabled},{default:a(()=>[L[3]||(L[3]=E("h3",{class:"text-h6 mb-2"}," Please enter the one time password to verify your account ",-1)),E("p",null,"A code has been sent to "+S(y.email),1),e(R,null,{default:a(()=>[e(C,null,{default:a(()=>[e(Ye,{disabled:y.disabled,length:"6",modelValue:l.value,"onUpdate:modelValue":L[0]||(L[0]=m=>l.value=m),rules:[o.value.required,o.value.min]},null,8,["disabled","modelValue","rules"])]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(C,null,{default:a(()=>[e(q,{disabled:l.value.length!=6,type:"submit",onClick:i,color:"primary",variant:"flat",class:"w-100"},{default:a(()=>L[2]||(L[2]=[V(" Validate ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"]))}}),Qe=W(Ze,[["__scopeId","data-v-c50d85ca"]]),ee=()=>{const t=Re(),s=JSON.stringify(t.query),b=new $e;return b.parseJSON(s),b},Xe=async(t,s,b=!1)=>{const l=G();return await $fetch(`${l.public.issuerUri}/connect/auth/internal`,{method:"post",body:JSON.stringify({oauth:t,internal:{username:s.username,password:s.password},new:b}),parseResponse:o=>{const n=JSON.parse(o);if(n.RedirectURI)return n.RedirectURI;throw o}})},se=async(t,s,b="",l=!1)=>{const o=G();return await $fetch(`${o.public.issuerUri}/connect/email/link`,{method:"post",body:JSON.stringify({oauth:t,internal:{username:s,password:b},new:l})})},et=async(t,s,b=!1)=>{const l=G();return await $fetch(`${l.public.issuerUri}/connect/auth/otp`,{method:"post",body:JSON.stringify({oauth:t,internal:{username:s.username,password:s.password},new:b}),parseResponse:o=>{const n=JSON.parse(o);if(n.RedirectURI)return n.RedirectURI;throw o}})},tt={class:"ma-auto",style:{"max-width":"450px"}},at=x({__name:"email",props:{variant:{default:()=>F.COMBINED}},emits:["cancel"],setup(t,{emit:s}){const b=s,l=X(),o=w(""),n=w("email"),i=w(!1),y=ee(),L=w(!1),m=w(),I=f=>{switch(f.mode.toLocaleString()){case"create":return $(f);case"link":return u(f.username);case"login":return B(f);case"register":return;case"validate":return d(f)}},$=async f=>{L.value=!1;const{token:k}=await se(y,f.username,f.password,!0);o.value=f.username,m.value=k,n.value="otp_create"},u=async f=>{L.value=!1;const{token:k}=await se(y,f);o.value=f,m.value=k,n.value="otp_validate"},d=async f=>{i.value=!0;const k=await et(y,{username:f.username,password:`${m.value}:${f.password}`},n.value=="otp_create");if(k){const r=new URL(k).searchParams.get("error");if((r==null?void 0:r.toLowerCase())!="invalid_request"&&(r==null?void 0:r.toLowerCase())!="access_denied"){H(k,{external:!0});return}}L.value=!0,i.value=!1,n.value="email"},B=async f=>{i.value=!0,L.value=!1;const k=await Xe(y,f);if(k){const r=new URL(k).searchParams.get("error");if((r==null?void 0:r.toLowerCase())=="invalid_request"){L.value=!0,i.value=!1;return}H(k,{external:!0})}};return(f,k)=>(c(),M("div",tt,[p(L)?(c(),h(R,{key:0},{default:a(()=>[e(C,null,{default:a(()=>[e(Ue,{type:"error"},{default:a(()=>[e(Fe,null,{default:a(()=>k[1]||(k[1]=[V("Login Failed")])),_:1}),k[2]||(k[2]=V(" There was problem with your login attempt. It may be the account doesn't exist or your password was incorrect. You may have also created your account using a Telegram login instead. "))]),_:1})]),_:1})]),_:1})):T("",!0),e(R,null,{default:a(()=>[e(C,null,{default:a(()=>[p(n)=="email"?(c(),h(Ke,{key:0,disabled:p(i),"redirect-url":p(l).href,variant:f.variant,onCallback:I},null,8,["disabled","redirect-url","variant"])):p(n)=="otp_create"||p(n)=="otp_validate"?(c(),h(Qe,{key:1,disabled:p(i),email:p(o),onCallback:I},null,8,["disabled","email"])):T("",!0)]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(C,{class:"text-left"},{default:a(()=>[e(q,{color:"error",onClick:k[0]||(k[0]=z=>b("cancel")),class:"w-100","prepend-icon":"mdi:mdi-arrow-left-circle"},{default:a(()=>k[3]||(k[3]=[V(" Go Back ")])),_:1})]),_:1})]),_:1})]))}}),nt={key:0,class:"ml-1"},ot=x({__name:"AuthButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(t){const s={amazon:{icon:"fa:fas fa-brands fa-amazon",label:A.buttonLoginAmazon,name:"Amazon"},email:{icon:"mdi:mdi-email",label:A.buttonLoginEmail,name:"Email"},facebook:{icon:"fa:fa fa-brands fa-facebook",label:A.buttonLoginFaceBook,name:"FaceBook"},google:{icon:"fa:fa fa-brands fa-google",label:A.buttonLoginGoogle,name:"Google"},internal:{icon:"mdi:mdi-email",label:A.buttonLoginEmail,name:"Email"},instagram:{icon:"fa:fa fa-brands fa-instagram",label:A.buttonLoginInstagram,name:"Instagram"},microsoft:{icon:"fa:fa fa-brands fa-windows",label:A.buttonLoginMicrosoft,name:"Microsoft"},steam:{icon:"fa:fa fa-brands fa-steam",label:A.buttonLoginSteam,name:"Steam"},telegram:{icon:"fa:fa fa-brands fa-telegram",label:A.buttonLoginTelegram,name:"Telegram"},twitch:{icon:"fa:fa fa-brands fa-twitch",label:A.buttonLoginTwitch,name:"Twitch"},twitter:{icon:"fa:fa fa-brands fa-twitter",label:A.buttonLoginTwitter,name:"Twitter"}},b=w(s[t.source.toLowerCase()].label||""),l=w(s[t.source.toLowerCase()].icon||""),o=U(()=>{var n,i;if(t.source.toLowerCase()==="internal"||t.source.toLowerCase()==="email")return(n=t.credential)==null?void 0:n.Email;try{const y=JSON.parse(((i=t.credential)==null?void 0:i.Data)||"{}");switch(t.source.toLowerCase()){case"telegram":return`@${y.username||y.id}`}}catch{}return""});return(n,i)=>(c(),h(q,{"append-icon":n.appendIcon,"prepend-icon":l.value,class:Z(`${n.source.toLowerCase()} ${t.class}`)},{default:a(()=>[V(S(b.value)+" ",1),n.showUsername&&n.credential?(c(),M("small",nt,"("+S(o.value)+")",1)):T("",!0)]),_:1},8,["append-icon","prepend-icon","class"]))}}),fe=W(ot,[["__scopeId","data-v-b98baed0"]]),ue=async(t,s,b=!1)=>{const l=G();return await $fetch(`${l.public.issuerUri}/connect/auth/telegram`,{method:"post",body:JSON.stringify({oauth:t,telegram:s,new:b}),parseResponse:o=>{const n=JSON.parse(o);if(n.RedirectURI)return n.RedirectURI;throw o}})},lt={class:"my-2"},rt={class:"my-2"},st={class:"my-2"},ut={class:"my-2"},it=x({__name:"TelegramButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1}},emits:["cancel"],setup(t,{emit:s}){const b=s,l=G();X();const o=ee(),n=w(!1),i=w(!1),y=w();w();const L=w(),m=async()=>{if(n.value=!1,!y.value)return;const u=await ue(o,y.value,!0);u&&H(u,{external:!0})},I=()=>{{if(!window.Telegram||!window.Telegram.Login||!window.Telegram.Login.auth){console.error("Telegram not initialised");return}window.Telegram.Login.auth({bot_id:l.public.telegramBotId||"",request_access:!0},u=>{u||console.error("Telegram Authorization Failed"),$(u)})}},$=async u=>{const d=await ue(o,u,!1);if(d){const f=new URL(d).searchParams.get("error");f?f=="access_denied"?(n.value=!0,y.value=u):f=="invalid_request"&&(i.value=!0):H(d,{external:!0})}};return _e(()=>{const u=document.createElement("script");u.async=!0,u.src="https://telegram.org/js/telegram-widget.js?22",L.value.appendChild(u)}),(u,d)=>(c(),M(K,null,[e(R,null,{default:a(()=>[e(C,{class:"text-center"},{default:a(()=>[E("div",{ref_key:"telegram",ref:L},null,512),e(fe,{"append-icon":u.appendIcon,credential:u.credential,"show-username":u.showUsername,source:"telegram",class:"d-flex justify-start w-100",onClick:I},null,8,["append-icon","credential","show-username"])]),_:1})]),_:1}),e(re,{modelValue:p(i),"onUpdate:modelValue":d[0]||(d[0]=B=>oe(i)?i.value=B:null),"show-save-action":!1,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Error Attempting Telegram Login","hide-extension":!0,"remove-button-spacer":!0,"close-action-label":"Close",onClose:d[1]||(d[1]=B=>i.value=!1)},{default:a(()=>[E("p",lt,S(p(A).messageCreateTelegramError1),1)]),_:1},8,["modelValue"]),e(re,{modelValue:p(n),"onUpdate:modelValue":d[2]||(d[2]=B=>oe(n)?n.value=B:null),"show-save-action":!0,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Create new account","hide-extension":!0,"save-button-label":"Create Account",onSave:m,onClose:d[3]||(d[3]=B=>b("cancel"))},{default:a(()=>[E("p",rt,S(p(A).messageCreateTelegramAccount1),1),E("p",st,S(p(A).messageCreateTelegramAccount2),1),E("p",ut,S(p(A).messageCreateTelegramAccount3),1)]),_:1},8,["modelValue"])],64))}}),dt=x({__name:"LoginButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},credential:{},params:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(t){return(s,b)=>s.source=="telegram"?(c(),h(it,{key:0})):(c(),h(fe,{key:1,"append-icon":s.appendIcon,credential:s.credential,"show-username":s.showUsername,source:s.source,class:"d-flex justify-start w-100"},null,8,["append-icon","credential","show-username","source"]))}}),D=W(dt,[["__scopeId","data-v-9a086b0f"]]),ct=x({__name:"LoginButtons",props:{showAmazonLogin:{type:Boolean,default:!1},showEmailLogin:{type:Boolean,default:!1},showFaceBookLogin:{type:Boolean,default:!1},showGoogleLogin:{type:Boolean,default:!1},showInstagramLogin:{type:Boolean,default:!1},showMicrosoftLogin:{type:Boolean,default:!1},showSteamLogin:{type:Boolean,default:!1},showTelegramLogin:{type:Boolean,default:!1},showTwitchLogin:{type:Boolean,default:!1},showTwitterLogin:{type:Boolean,default:!1}},emits:["login"],setup(t,{emit:s}){X(),ee();const b=s,l=w("");return Q(l,()=>{b("login",l.value)}),(o,n)=>(c(),M("div",null,[o.showEmailLogin?(c(),h(R,{key:0,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"internal",onClick:n[0]||(n[0]=i=>l.value="internal")})]),_:1})]),_:1})):T("",!0),o.showAmazonLogin?(c(),h(R,{key:1,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"amazon",onClick:n[1]||(n[1]=i=>l.value="amazon")})]),_:1})]),_:1})):T("",!0),o.showFaceBookLogin?(c(),h(R,{key:2,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"facebook",onClick:n[2]||(n[2]=i=>l.value="facebook")})]),_:1})]),_:1})):T("",!0),o.showGoogleLogin?(c(),h(R,{key:3,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"google",onClick:n[3]||(n[3]=i=>l.value="google")})]),_:1})]),_:1})):T("",!0),o.showInstagramLogin?(c(),h(R,{key:4,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"instagram",onClick:n[4]||(n[4]=i=>l.value="instagram")})]),_:1})]),_:1})):T("",!0),o.showMicrosoftLogin?(c(),h(R,{key:5,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"microsoft",onClick:n[5]||(n[5]=i=>l.value="microsoft")})]),_:1})]),_:1})):T("",!0),o.showSteamLogin?(c(),h(R,{key:6,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"steam",onClick:n[6]||(n[6]=i=>l.value="steam")})]),_:1})]),_:1})):T("",!0),o.showTelegramLogin?(c(),h(R,{key:7,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"telegram"})]),_:1})]),_:1})):T("",!0),o.showTwitchLogin?(c(),h(R,{key:8,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"twitch",onClick:n[7]||(n[7]=i=>l.value="twitch")})]),_:1})]),_:1})):T("",!0),o.showTwitterLogin?(c(),h(R,{key:9,dense:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(D,{source:"twitter",onClick:n[8]||(n[8]=i=>l.value="twitter")})]),_:1})]),_:1})):T("",!0)]))}}),mt=()=>{const t=Ae(),s=t.currentRoute.value.query.state||"",b=new URL(t.currentRoute.value.query.redirect_uri||"");return b.searchParams.set("state",s),b.toString()},ft={class:"text-center"},_t=x({__name:"index",emits:["pageTitle"],setup(t,{emit:s}){const b=G();s("pageTitle","Login");const o=mt(),n=w("BUTTONS"),i=y=>{switch(y){case"internal":n.value="INTERNAL_LOGIN";break}};return(y,L)=>{const m=ve;return c(),h(qe,null,{default:a(()=>[E("h1",ft,S(p(b).public.organisationName),1),p(n)=="BUTTONS"?(c(),M(K,{key:0},[e(ct,{showEmailLogin:!0,showTelegramLogin:!0,onLogin:i,style:{"max-width":"250px"},class:"ma-auto mb-5"}),e(R,null,{default:a(()=>[e(C,{class:"pa-0 text-center"},{default:a(()=>[e(m,{href:p(o)},{default:a(()=>[e(q,{variant:"text"},{default:a(()=>L[1]||(L[1]=[V(" Cancel ")])),_:1})]),_:1},8,["href"])]),_:1})]),_:1})],64)):T("",!0),p(n)=="INTERNAL_LOGIN"?(c(),h(at,{key:1,onCancel:L[0]||(L[0]=I=>n.value="BUTTONS")})):T("",!0)]),_:1})}}});export{_t as default};
